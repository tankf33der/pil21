#!/usr/bin/picolisp /usr/lib/picolisp/lib.l
# 16sep20abu

(load "@lib/misc.l" "@lib/vip.l")

(bye
   (if
      (vip~vi  ## [+<pat>] [+[<num>]] <file1>  [+[<num>]] <file2> ..
         (make
            (for (L (argv)  L)
               (let S (++ L)
                  (link
                     (nond
                        ((pre? "+" S) S)
                        ((= "+" S)
                           (if (format S)
                              (cons @ (++ L))
                              (cons (cdr (chop S))) ) )
                        (NIL (cons T (++ L))) ) ) ) ) ) )
      0
      1 ) )
