#!/usr/bin/picolisp /usr/lib/picolisp/lib.l
# 04jun23abu

(unless *Dbg
   (load "@lib/vip.l") )

(stack 1024)

(bye
   (if
      (vip~vi  ## [+<pat> | +[<num>]] <file1>  [+[<num>]] <file2> ..
         (make
            (while (opt)
               (let (S @  L (chop S))
                  (cond
                     ((pre? "+" S)
                        (link
                           (if (get (intern (cdr L)) '*Dbg 1)
                              (cons (car @) (cadr @))
                              (cons
                                 (cond
                                    ((= "+" S) T)
                                    ((format S) @)
                                    (T (cdr L)) )
                                 (opt) ) ) ) )
                     ((pre? "-" S) (load S))
                     (T (link S)) ) ) ) ) )
      0
      1 ) )
